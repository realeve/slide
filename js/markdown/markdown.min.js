!function(e,t){"function"==typeof define&&define.amd?(e.marked=require("./marked"),e.RevealMarkdown=t(e.marked),e.RevealMarkdown.initialize()):"object"==typeof exports?module.exports=t(require("./marked")):e.RevealMarkdown=t(e.marked)}(this,function(e){function t(e){var t=e.querySelector("script"),a=(t||e).textContent;a=a.replace(new RegExp(m,"g"),"</script>");var r=a.match(/^\n?(\s*)/)[1].length,n=a.match(/^\n?(\t*)/)[1].length;return n>0?a=a.replace(new RegExp("\\n?\\t{"+n+"}","g"),"\n"):r>1&&(a=a.replace(new RegExp("\\n? {"+r+"}","g"),"\n")),a}function a(e){for(var t=e.attributes,a=[],r=0,n=t.length;n>r;r++){var i=t[r].name,s=t[r].value;/data\-(markdown|separator|vertical|notes)/gi.test(i)||(s?a.push(i+'="'+s+'"'):a.push(i))}return a.join(" ")}function r(e){return e=e||{},e.separator=e.separator||c,e.notesSeparator=e.notesSeparator||p,e.attributes=e.attributes||"",e}function n(t,a){a=r(a);var n=t.split(new RegExp(a.notesSeparator,"mgi"));return 2===n.length&&(t=n[0]+'<aside class="notes">'+e(n[1].trim())+"</aside>"),t=t.replace(/<\/script>/g,m),'<script type="text/template">'+t+"</script>"}function i(e,t){t=r(t);for(var a,i,s,o=new RegExp(t.separator+(t.verticalSeparator?"|"+t.verticalSeparator:""),"mg"),d=new RegExp(t.separator),l=0,u=!0,c=[];a=o.exec(e);)notes=null,i=d.test(a[0]),!i&&u&&c.push([]),s=e.substring(l,a.index),i&&u?c.push(s):c[c.length-1].push(s),l=o.lastIndex,u=i;(u?c:c[c.length-1]).push(e.substring(l));for(var p="",h=0,g=c.length;g>h;h++)c[h]instanceof Array?c[h].forEach(function(e){p+='<slide class="slide"><section class="slide-wrapper" data-markdown>'+n(e,t)+"</section></slide>"}):p+='<slide class="slide"><section class="slide-wrapper" '+t.attributes+" data-markdown>"+n(c[h],t)+"</section></slide>";return p}function s(){for(var e,r=document.querySelectorAll("[data-markdown]"),s=0,o=r.length;o>s;s++)if(e=r[s],e.getAttribute("data-markdown").length){var d=new XMLHttpRequest,l=e.getAttribute("data-markdown");datacharset=e.getAttribute("data-charset"),null!=datacharset&&""!=datacharset&&d.overrideMimeType("text/html; charset="+datacharset),d.onreadystatechange=function(){4===d.readyState&&(d.status>=200&&d.status<300||0===d.status?e.outerHTML=i(d.responseText,{separator:e.getAttribute("data-separator"),verticalSeparator:e.getAttribute("data-separator-vertical"),notesSeparator:e.getAttribute("data-separator-notes"),attributes:a(e)}):e.outerHTML='<section data-state="alert">ERROR: The attempt to fetch '+l+" failed with HTTP status "+d.status+".Check your browser's JavaScript console for more details.<p>Remember that you need to serve the presentation HTML from a HTTP server.</p></section>")},d.open("GET",l,!1);try{d.send()}catch(u){alert("Failed to get the Markdown file "+l+". Make sure that the presentation and the file are served by a HTTP server and the file can be found there. "+u)}}else e.getAttribute("data-separator")||e.getAttribute("data-separator-vertical")||e.getAttribute("data-separator-notes")?e.outerHTML=i(t(e),{separator:e.getAttribute("data-separator"),verticalSeparator:e.getAttribute("data-separator-vertical"),notesSeparator:e.getAttribute("data-separator-notes"),attributes:a(e)}):e.innerHTML=n(t(e))}function o(e,t,a){var r=new RegExp(a,"mg"),n=new RegExp('([^"= ]+?)="([^"=]+?)"',"mg"),i=e.nodeValue;if(matches=r.exec(i)){var s=matches[1];for(i=i.substring(0,matches.index)+i.substring(r.lastIndex),e.nodeValue=i;matchesClass=n.exec(s);)t.setAttribute(matchesClass[1],matchesClass[2]);return!0}return!1}function d(e,t,a,r,n){if(null!=t&&void 0!=t.childNodes&&t.childNodes.length>0){previousParentElement=t;for(var i=0;i<t.childNodes.length;i++){if(childElement=t.childNodes[i],i>0)for(j=i-1;j>=0;){if(aPreviousChildElement=t.childNodes[j],"function"==typeof aPreviousChildElement.setAttribute&&"BR"!=aPreviousChildElement.tagName){previousParentElement=aPreviousChildElement;break}j-=1}parentSection=e,"section"==childElement.nodeName&&(parentSection=childElement,previousParentElement=childElement),"function"!=typeof childElement.setAttribute&&childElement.nodeType!=Node.COMMENT_NODE||d(parentSection,childElement,previousParentElement,r,n)}}t.nodeType==Node.COMMENT_NODE&&0==o(t,a,r)&&o(t,e,n)}function l(e,t){-1!==t.indexOf("background-image")&&(e.parentNode.className+=" fill")}function u(){for(var a=document.querySelectorAll("[data-markdown]"),r=a[0].getAttribute("data-img-content",!0)||"markdown",n=0,i=a.length;i>n;n++){var s=a[n];if(!s.getAttribute("data-markdown-parsed")){s.setAttribute("data-markdown-parsed",!0);var o=s.querySelector("aside.notes"),u=t(s),c=e(u);s.innerHTML=c.replace(RegExp(/<img src=".\//gi),'<img src="./'+r+"/"),d(s.parentNode,s,null,s.getAttribute("data-element-attributes")||s.parentNode.getAttribute("data-element-attributes")||h,s.getAttribute("data-attributes")||s.parentNode.getAttribute("data-attributes")||g),l(s,c),o&&s.appendChild(o)}}$(".slide.fill").append('<div style="background-color:rgba(55,68,84,.82);position:absolute;left:0;right:0;top:0;bottom:0;width:100%;height:100%;z-index:-1;">')}if("undefined"==typeof e)throw"The reveal.js Markdown plugin requires marked to be loaded";"undefined"!=typeof hljs&&e.setOptions({highlight:function(e,t){return hljs.highlightAuto(e,t).value}});var c="^\r?\n---\r?\n$",p="note:",h="\\.element\\s*?(.+?)$",g="\\.slide:\\s*?(\\S.+?)$",m="__SCRIPT_END__";return{initialize:function(){s(),u()},processSlides:s,convertSlides:u,slidify:i}});